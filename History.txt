Bulgarian translation.
Large fonts option now enlarges fonts on raster maps too. Certainly not only fonts but everything.
Commas in waypoint names are replaced with dots.


Removed saving traffic nodes to file.
I've played a little with colors in dark color schemes. Now they must function better.

17.06.2007:
+ Добавил чтение названий улиц в картах с маршрутизацией.
* Сломал и починил файловый диалог.
* Менее жёсткие проверки NMEA.
+ Автоматическое включение BlueTooth
* На смартфоне набор портов стал стандартным.
* Переработал диалоги. Им теперь не нужны ресурсы.
* Исправил падение при закрытии последней карты.

+ Переход из режима слежения за курсором в режим ручного управления. Возврат в автоматический режим через 5 минут или через контекстное меню.
* Исправлены все меню в версии для PPC. Сделано нормальное главное меню.
* Улучшено вычисление масштаба. Теперь считается не по месту, где он рисуется, а по центру. Особенно заметно на мелких масштабах.
+ Переход на центр карты из списка.
+ В диалогах карт и точек для всех пунктов меню добавлена обработка соответствующих кнопок.
+ Во всех диалогах со списками 7 - страница вверх, 9 - страница вниз.
* Поменял все листбоксы на листвью. Вообще провёл большой рефакторинг диалогов.

07.06.2007:
+ Выбор формата представления координат.
+ Ручной ввод координат точки.
+ Открытие всех карт в папке.
+ Импорт точек из файла.
* Восстановил порядок перехода по табуляции в диалогах.
+ Добавил возможность редактировать высоту точки.

+ Синхронизация времени с GPS из меню.
+ Целочисленный косинус.
+ Классическое представление широты и долготы (градусы, минуты, секунды).
+ Кеширование шрифтов.
+ Класс для device context.
+ Синхронизация потоков.
* Ограничения на текущие координаты (чтобы не уезжать с карты)
* Целочисленный коэффициент сжатия по горизонтали.
+ Дополнительное выделение путевой точки, по которой сработало предупреждение.
+ Отключение отображения карты, когда мало памяти.
+ Отключение записи трека в память, когда очень мало памяти.
* Рефакторинг кода.
+ Целочисленное расстояние между точками.
+ Мониторы широты и долготы.
* Переименование в gpsVP.
* Теперь при синхронизации времени месяц тоже исправляется :)
+ Запись файла трека кусками по 4096 байт с закрытием файла.
+ Отключение записи файла трека.

18.04.2007:
+ Добавил пустую иконку для типа 14, который используется для надписей на карте.
* Подвигал мониторы, чтобы по умолчанию выбирались более интересные.
+ Добавил опцию Low light, по которой уменьшаю яркость вдвое (AlphaBlend 50% на чёрный фон)
- Опции теперь не добавляются в мониторы.

26.02.2007:
+ Добавил в исполняемый вторую (ночную) цветовую схему и команду меню для переключения между схемами.
+ Добавил в информацию о путевых точках высоту. Она только просматривается. Устанавливается при создании точки на месте курсора.

06.11.2006:
+ Добавлен режим поддержки низкого потребления памяти. Включается галочкой. По умолчанию включен. В этом режиме фрагменты карты, которые не нужны сейчас, выгружаются. Сделано пока на самом деле не очень, но я уже знаю, как делать правильно.
* Карты, которые не удаётся открыть, выбрасываются из атласа.
* Мелкие исправления, в том числе для уменьшения количества Warning-ов в новом компиляторе.
* Уменьшил размер куска трека, который остаётся в памяти, но похоже, что это как-то не так работает.

06.10.2006:
+ Собрал версию, которая имеет меню в Windows Mobile 5.0 PocketPC.

03.10.2006:
+ Собрал новую версию непосредственно под Windows Mobile 5.0 SmartPhone.

02.10.2006:
* Перевёл Windows-версию на новый компилятор (Visual Studio 2005). Это первый шаг к переводу всего на этот компилятор.
+ Отделил поддержку устройства во включенном состоянии от поддержки подсветки, сделал её в том числе и в фоновом режиме, добавил отдельную опцию (на смартфоне не переключается). Прошу проверить :-)
+ Добавил проверку при добавлении точки в трек. Если с добавления предыдущей точки прошло больше трёх секунд, то трек считается разорванным. Тоже прошу проверить. Тут сначала была ошибка, но я её заметил до коммита.
+ Добавил проверку того, что файл существует, в диалоге сохранения, и вопрос о том, надо ли его переписывать.

25.08.2006:
+ Сделал, чтобы в списке всегда выбирался первый элемент. Теперь и последний трек тоже можно выгрузить.
* Исправил существенную ошибку в файловых диалогах, из-за которой они часто возвращали не файл, а директорию.

24.08.2006:
* Уменьшил радиус, в котором ищутся объекты для контекстного меню, а то он для некоторых типов составлял 2000 экранных точек.
* Диалог открытия файла: убрал метки.
* Исправил чтение строк из реестра. Раньше у них получались ненужные хвосты.
* Попытался ускорить выход.
+ Диалог открытия файла: при выборе файла заполняется поле ввода.
+ Диалог открытия файла: добавил учёт параметра OFN_FILEMUSTEXIST.
+ Диалог открытия файла: сделал открытие директорий.
* Сделал новую иконку программе.
* Сделал буферизацию при выводе мониторов. Теперь они не мигают.

20.08.2006:
* Перевёл на целочисленную арифметику масштаб, шаг трека.
+ Реализовал чтение описаний типов из файла от cGPSMapper.
+ Добавил в About дату сборки.
+ Избавился от Руссовских иконок, вставил Гарминовские для всех типов, которые нашёл в картах, которыми пользуюсь. Присылайте заявки на новые типы, пока для всех не сделал.
+ Сделал для неизвестных точек специальное обозначение - знак вопроса.

16.08.2006:
+ Отказался от использования в смартфоне tGetFile. Перешёл на собственные диалоги. Правда, они пока очень сырые, но это только начало.
* Переделал вывод расстояний и высот. Теперь всегда стараюсь показать 4 знака. За счёт этого высоты будут точнее.
* Вытащил базовый класс диалогов из файла MapApp.cpp. Порефакторил и конкретные диалоги.
+ Добавил About.

14.08.2006:
* При рисовании масштаба убрал использование географических координат. Линейка теперь всегда на одном месте.
* Исправил ограничение минимального масштаба. Оно не работало.
* Как-то починил установку времени по приёмнику. Но вроде ничего не поменял.
* Сделал так, чтобы шрифты мониторов всегда оставались горизонтальными.
+ В отладочном режиме начал делать свои файловые диалоги.
* Сделал приведение расширений к нижнему регистру перед проверкой. Теперь файлы, у которых расширения не в нижнем регистре, тоже открываются из командной строки.
* При переходе в другое приложение мы выходим из полноэкранного режима, и теперь заголовок окна не теряется.
* При открытии файла исправил проверку, в которой файловый дескриптор сравнивался с нулём на равенство, а не на меньше. Из-за этого после удаления карт программа переставала запускаться.
* Для нескольких из описанных выше исправлений перенёс обработку активации/деактивации и таймера внутрь объекта приложения.
* Теперь у меня подсветка на телефоне замечательно держится.

26.06.2006
* Восстановил чтение цветов из файла.
* Добавил утилиту для обрезания треков по карте.
* Теперь при указании треку имени существующего файла файл не стирается, а дописывается. Это существенно для утилиты обрезания треков.

21.07.2006
* На КПК по загадочной причине все пункты меню Done стали маленькими и без текста. Немного пошаманил. Стало нормально.
* Убрал отладочные мониторы Profile X и Raw GPS time в отладочный режим.
* На эмуляторе смартфона добился нормального перехода в полный экран. И возврата тоже.
* Немного расширил логирование, чтобы посмотреть, что происходит у Егора.
* Сделал переоткрытие порта, если из него ничего не прочиталось. У Егора должно перестать зависать соединение.
* Сделал более строгую проверку полученного результата. Должно стать гораздо меньше скачков при неправильных данных.

19.07.2006
*** Адаптировал программу под некорректное поведение ReadFile на Windows Mobile 2003. Теперь программа нормально ведёт себя при недостпности приёмника на устройствах со старым Windows.
+ Реализовал нормальную поддержку предотвращения отключения экрана. Предотвращается отключение экрана и переход в Home Screen.
+ Сделал в отладочном режиме возможность включить логирование потока соединения с приёмником.
* Исправил ошибку при разборе дат, из-за которой падало.
* Поправил разделители в меню (до этого они не появлялись, хотя и были задуманы).
* Сделал очередную попытку сделать полный экран на старом смартфоне (сделал активацию окна). Похоже, не помогло.

16.07.2006
+ Сделал, чтобы на смартфоне в полном экране работало меню.
* Поменял опции установки полного экрана в смартфоне. Может, заработает.
* Исправил ошибки, из-за которых много где не работало переключение в полный экран.
+ Теперь датчик времени знает и дату, и использует её при синхронизации времени по GPS.
* Теперь вертикальный размер для мониторов считается как 1/10 высоты окна. Шрифты создаются динамически.
+ Реализовал поддержку ландшафтной ориентации экрана. В таком варианте мониторы размещаются справа и количество мониторов в режмиме мониторов в строках и столбцах меняется.

15.07.2006
* Провёл глобальную переделку меню. Теперь меню задаётся в коде программы, поэтому на всех платформах одинаковое. Правда, на КПК в корневое меню пункты добавить не удалось, поэтому там в корне только один пункт: "Menu".
* В Windows-версии теперь устанавливается пользовательская локаль для всего и "си" для чисел. Теперь названия точек русскими буквами сохраняется нормально.
+ Сделал в Windows-версии обработку командной строки.
+ Сделал нормальную обработку командной строки (с кавычками).
* В механизме открытия карты сделал защиту от повторного открытия.
+ Сделал регистрацию всех типов файлов.
- Удалил функциональность выбора одного из трёх мониторов.
* Буферизацию перенёс в отладочное меню.
* Перенёс карту кнопок внутрь меню.

10.07.2006
*** Переделал работу с COM-портом. У меня всё работает, вроде даже лучше, чем раньше. Проверяйте!
+ Сделал простейший класс для работы с диалогами, перенёс в него создание отладочного подменю, меню Navigate recent, контекстное меню карты и мониторов.
+ Сделал настройки кнопок по умолчанию. Сейчас умолчание соответсвует тому, что удобно настроить на телефоне. Влево-вправо-вверх-вниз-действие на джойстике. Если есть предложения, как сделать на КПК, сделаю там отдельные настройки.

04.07.2006
* Починил прекращение навигации. При переносе обработки команд внутрь CMapApp это было потеряно.
* В очередной раз починил установку кнопок на КПК. На этот раз проверил на эмуляторе.
+ Сделал настройку, доступную только в реестре (в Windows и в меню), отключающую показ отладочных пунктов в основном и контекстном меню.
- Временно убрал монитор расстояния по треку. Сейчас он слишком медленный.

29.06.2006
+ В диалог Settings добавил указание папки для треков в текстовом виде.
* Один из "Show monitors" на КПК оказался "Show road name".
* Исправил ошибку с невозможностью на КПК назначить действия джойстику.
+ Добавил диалоги информации о пользовательских точках, точках и полилиниях карты из контекстного меню. Правда, информации там пока мало, но можно узнать координаты точки.
* Сделал, чтобы при измении статуса соединения тоже происходила перерисовка.
* Исправил внесённую недавно ошибку с неотрисовкой карты при запуске.
- Убрал тестовое вычисление дистанции из контекстного меню.
- Удалил из всех меню ссылки на недоделанный диалог "Waypoints (new)".
* Везде заменил Rename на Properties, так как этот диалог теперь меняет не только имя точки.
* Исправил ошибку, когда навигация шла не на ту точку, которую выбрали. Подробности в #26.
+ Теперь файл точек существует сразу. Раньше надо было создать явно.
* Вернул в порядок ресурсы, сломанные предыдущим обновлением.
* Поменял везде Close на Unload.

23.06.2006:
* В версии для PocketPC перевёл все диалоги на меню вместо кнопок.
- В настольной Windows звук не работает.
+ Добавил опцию отключения звука.
+ Добавил в свойства точки радиус предупреждения, отображение точек, находящихся в радиусе предупреждения, другой иконкой и звуковое предупреждение при попадании курсора в радиус предупреждения одной из таких точек.
+ Добавил команду начала записи нового трека.
+ Добавил настраиваемое отображение метки центра экрана для контекстного меню. Теперь в центре экрана показывается пиктограмма (сейчас крестик), которая показывает, с какой точкой производятся действия.

19.06.2006:
* Исправил ошибку разбора цветов из реестра.
* Исходники перемещены в директорию src, бинарники - в директорию bin.
* Исправлена ошибка перевода времени в локальное при выводе.
* Файл GDIPainter.cpp исправлен по CodeWizard. Это серьёзная переделка, могло что-нибудь сломаться.